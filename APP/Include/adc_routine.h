/**************************************************************************************************
File Name: adc_routine.h
External Data:
    Name                                    Source
    --------------------------------------- -----------------------------------------------------

External Functions:
    Name                                    Source
    --------------------------------------- -----------------------------------------------------

Description:  
    

===================================================================================================
History:
     Date       Author           Description of Change
     ---------- ---------------- -----------------------------------------------------------------
     08/04      Wilson Chen      1. Initial version

**************************************************************************************************/

#ifndef __ADC_ROUTINE_H__
#define __ADC_ROUTINE_H__

//------------------------------------------------------------------------------------------------------------
// Includes
//------------------------------------------------------------------------------------------------------------
#include "main.h"
//------------------------------------------------------------------------------------------------------------
// Macro definitions
//------------------------------------------------------------------------------------------------------------
#define ADC_CONV_TASK_STACK_SIZE         (256)
#define ADC_CONV_TASK_PRIORITY           (1)

#define INPUT_UVP                        40
#define INPUT_OVP                        55
#define INPUT_OCP                        35
#define NTC_OTP                          100

#define CrtAdcVal(name)					 AdcVal name = {0, 0, 0, 0, 0, 0, &name.HexVal}
#define NTC_Tab_Size                     166

#define PRECISE_10                       10
#define PRECISE_100                      100

#define IIN_SCALE                        6600 // 20.00 * 3.3V = 66.00A
#define VBUS_SCALE                       6501 // 19.7ohm * 3.3V = 65.01V
//------------------------------------------------------------------------------------------------------------
// Type definitions
//------------------------------------------------------------------------------------------------------------
// Enumeration

// Struct & Union
typedef struct
{
	short DecVal;
	short DecInt;
	unsigned long Filt_Buffer;
	long HexVal;
	long CalibHex;
	long Filt;
	long *ValPtr;
}AdcVal;
//------------------------------------------------------------------------------------------------------------
// Global function prototypes
//------------------------------------------------------------------------------------------------------------
extern void adc_init(void);

//------------------------------------------------------------------------------------------------------------
// Global data declarations
//------------------------------------------------------------------------------------------------------------
extern TaskHandle_t AdcConvTaskHandle;

#endif /* __ADC_ROUTINE_H__ */


