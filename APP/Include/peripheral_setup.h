/***********************************************************************************************************************
File Name: peripheral_setup.h
Global Data:
    Name                    Type                        Description
    ----------------------- --------------------------- ------------------------------------------------------------

Description:

========================================================================================================================
History:
    Date        Author          Description of Change
    ----------- --------------- ------------------------------------------------------------------------------------
    12/26/2024  Fred Huang      Create file

***********************************************************************************************************************/

#ifndef _PERIPHERAL_SETUP_H_
#define _PERIPHERAL_SETUP_H_

//------------------------------------------------------------------------------------------------------------
// Includes
//------------------------------------------------------------------------------------------------------------
#include "main.h"

//------------------------------------------------------------------------------------------------------------
// Macro definitions
//------------------------------------------------------------------------------------------------------------
#define _DELAY_US(usec)           do{                                       \
                                    uint32_t delay_end;                   \
                                    CPU_DELAY_INTI();                     \
                                    /* Delay*/                            \
                                    delay_end = DWT_CYCCNT + (usec * (240000000/1000000)); \
                                    while(DWT_CYCCNT < delay_end){};      \
                                    CPU_DELAY_DISABLE();                  \
                                  }while(0)

#define PWM_FREQ                  20000 // 20kHz
//------------------------------------------------------------------------------------------------------------
// Type definitions
//------------------------------------------------------------------------------------------------------------
// Struct & Union

//------------------------------------------------------------------------------------------------------------
// Global function prototypes
//------------------------------------------------------------------------------------------------------------
void Peripheral_Setup(void);
void Enable_Watchdog(void);
void Reload_Watchdog(void);
//------------------------------------------------------------------------------------------------------------
// Global data declarations
//------------------------------------------------------------------------------------------------------------
extern unsigned short adc1RawData[];
extern unsigned short adc2RawData[];
extern unsigned short adc3RawData[];
extern unsigned short adc4RawData[];
extern uint32_t SHRTIM_Period;
extern uint16_t ATIM_Period;
//----------------------------------------------------------------------------------------------------------------------
#endif /* _PERIPHERAL_SETUP_H_ */
